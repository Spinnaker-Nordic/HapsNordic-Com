<style>
  #section__{{ section.id }} {
    grid-template-columns: repeat({{ section.settings.cols_mobile }}, 1fr);
  }

  @media screen and (min-width: 1024px) {
    #section__{{ section.id }} {
      grid-template-columns: repeat({{ section.blocks.size | at_most: section.settings.cols_desktop }}, 1fr);
    }
  }
</style>
<div class="section bg-primary-bg color-scheme__{{ section.settings.color_scheme }} ">
  <div
    id="section__{{ section.id }}"
    class="{% if section.settings.mobile_slider %}flex overflow-x-auto scrollbar-hide{% else %}grid{% endif %} section--bleed gap-4 text-primary-text lg:grid"
  >
    {% for block in section.blocks %}
      {% assign this = block.settings %}
      {% assign image = this.image | default: this.collection.image %}
      <div
        class="group relative rounded overflow-hidden hover:cursor-pointer {% if section.settings.mobile_slider %}max-lg:flex-[90%_0_0]{% endif %}"
      >
        <div class="{{ section.settings.media_aspect }} ">
          {% if image == blank %}
            {%- liquid
              capture placeholder_image
                cycle 'placeholder': 'hero-apparel-1', 'hero-apparel-2', 'hero-apparel-3'
              endcapture
              echo placeholder_image | placeholder_svg_tag: 'placeholder'
            -%}
          {% else %}
            {% assign minimumWidth = 100 | divided_by: section.blocks.size %}
            {%- capture sizes -%}
            (min-width: 1024px) {{ 100 | divided_by: section.blocks.size | times: image.aspect_ratio | at_least: minimumWidth }}vw, 100vw
            {%- endcapture -%}
            {{
              image
              | image_url: width: image.width
              | image_tag:
                loading: 'lazy',
                sizes: sizes,
                widths: '150, 180, 210, 240, 270, 300, 330, 410, 490, 570, 650, 730, 810, 890, 970, 1050, 1290, 1530, 1770, 2090, 2410, 2730',
                class: 'object-cover rounded bg-secondary-bg group-hover:scale-[1.025] transition-transform duration-500 ease-in-out'
            }}
          {% endif %}
        </div>
        <div class="absolute inset-0 flex items-center justify-center px-4 text-center">
  <div class="z-10 flex flex-col items-center justify-center gap-4">
            <h2 class="text-2xl font-semibold text-white">
  {{ this.title | default: this.collection.title | default: 'Collection' }}
</h2>
<a href="{{ this.url | default: this.collection.url }}"
   class="px-4 py-2 bg-white text-black font-medium rounded hover:bg-neutral-100 transition">
  {{ this.button_label | default: 'Se mere' }}
</a>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
</div>

{% schema %}
{
  "name": "Collection list2",
  "settings": [
    {
      "type": "select",
      "id": "media_aspect",
      "label": "Media aspect ratio",
      "options": [
        {
          "value": "aspect-w-1 aspect-h-1",
          "label": "1:1"
        },
        {
          "value": "aspect-w-16 aspect-h-9",
          "label": "16:9"
        },
        {
          "value": "aspect-w-4 aspect-h-6",
          "label": "4:6"
        },
        {
          "value": "aspect-w-4 aspect-h-5",
          "label": "4:5"
        }
      ],
      "default": "aspect-w-1 aspect-h-1",
      "info": "Applies to all media in this section"
    },
    {
      "type": "range",
      "id": "cols_desktop",
      "min": 1,
      "max": 4,
      "step": 1,
      "label": "Max columns on desktop",
      "default": 4
    },
    {
      "type": "checkbox",
      "id": "mobile_slider",
      "label": "Enable carousel on mobile",
      "default": false
    },
    {
      "type": "select",
      "id": "cols_mobile",
      "label": "Number of columns on mobile",
      "options": [
        {
          "value": "1",
          "label": "1 column"
        },
        {
          "value": "2",
          "label": "2 columns"
        }
      ],
      "default": "1",
      "info": "Only applicable if carousel is turned off for mobile"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "default": "background-1",
      "label": "Color Scheme"
    }
  ],
  "blocks": [
    {
      "type": "collection",
      "name": "Collection",
      "settings": [
        {
          "type": "collection",
          "id": "collection",
          "label": "Collection"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "info": "Defaults to collection"
        },
        {
          "type": "url",
          "id": "url",
          "label": "URL",
          "info": "Defaults to collection"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image",
          "info": "Defaults to collection"
        },
        {
  "type": "text",
  "id": "button_label",
  "label": "Button label",
  "default": "Se mere"
}
      ]
    }
  ],
  "presets": [
    {
      "name": "Collection list2",
      "blocks": [
        {
          "type": "collection"
        },
        {
          "type": "collection"
        },
        {
          "type": "collection"
        }
      ]
    }
  ]
}
{% endschema %}
